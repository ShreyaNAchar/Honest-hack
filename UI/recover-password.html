<!DOCTYPE html> 
<html lang="en"> 
  <head> 
    <meta charset="utf-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <meta name="description" content="Easily report cases of corruption to the appropriate authorities. Users can also report on things that needs government intervention."> 
    <meta name="author" content="Okosun Valentine Ejodamen <valenstical@gmail.com>"> 
    <title>Recover Password|iReporter - Easily report cases of corruption and areas that needs government intervention|Andela Developer Challenge</title>     
    <link href="assets/images/icons/icon.png" rel="icon" type="image/png"> 
    <link href="assets/css/central.css" rel="stylesheet" type="text/css"> 
    <link href="assets/css/form.css" rel="stylesheet" type="text/css"> 
    <link href="assets/css/login.css" rel="stylesheet" type="text/css"> 
    <link href="assets/css/font-awesome.css" rel="stylesheet" type="text/css"> 
    <meta name="theme-color" content="#009f8b"> 
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->     
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->     
  </head>   
  <body> 
    <nav class="navigation" data-pg-name="Navigation Bar" data-pg-collapsed> 
      <div class="wrapper" data-pg-name="Wrapper"> 
        <div class="clear-float"> 
          <a href="index.html" class="nav-brand text-brand float-left">AlertMaster</a> 
          <ul class="nav-section float-right nav-shown nav-hidden transition" data-pg-name="Nav Section" data-pg-collapsed id="nav-section" onmouseenter="setMenuHidable(false)" onmouseleave="setMenuHidable(true)"> 
            <li data-pg-name="Nav Item"> 
              <a href="index.html">Home</a> 
            </li>             
            <li data-pg-name="Nav Item"> 
              <a href="about.html">About</a> 
            </li>             
            <li data-pg-name="Nav Item" data-pg-collapsed> 
              <a href="sign-in.html">Sign in</a> 
            </li>             
            <li data-pg-name="Nav Item" class="btn-cta" data-pg-collapsed> 
              <a href="sign-up.html" class="btn-brand transition">Report a case</a> 
            </li>             
          </ul>           
          <button class="menu-bar" onclick="toggleMenu()" onblur="hideMenu()" data-pg-collapsed> 
            <i class="fa fa-align-justify"></i> 
          </button>           
        </div>         
      </div>       
    </nav>     
    <section class="login-wrapper bg-grey top-space" data-pg-name="How it Works"> 
      <div class="wrapper" data-pg-name="Wrapper"> 
        <form class="card login-form" onsubmit="return recoverPassword()"> 
          <h1 class="text-brand">Recover Password</h1> 
          <p>Forgot your password? Enter your email address below and we'll get you back on track.</p> 
          <div class="form-wrapper" data-pg-collapsed> 
            <label>Email</label>             
            <input class="form-element" type="email" name="email"> 
          </div>  
          <div class="form-wrapper" data-pg-collapsed> 
            <label>CAPTCHA</label>
            <span id="captcha-text"></span>
        </div>
        <!-- Input field for user's response -->
        <div class="form-wrapper" data-pg-collapsed> 
            <label>Enter CAPTCHA</label>             
            <input class="form-element" type="text" id="captcha-input"> 
        </div>         
          <button class="btn-brand" type="submit" onclick="recover(event)">Reset password</button>           
        </form>         
        <p class="login-register-link">Back to <a href="sign-in.html">sign in</a></p> 
      </div>       
    </section>  
    <script>
      // Function to handle password recovery
      function recover(event) {
          event.preventDefault();
          // Get the user-entered CAPTCHA value
          const captchaInput = document.getElementById('captcha-input').value;
          
          // Get the correct CAPTCHA challenge from session storage
          const captcha = sessionStorage.getItem('captcha');
          
          // Verify the user-entered CAPTCHA value
          if (captchaInput === captcha) {
              // CAPTCHA verification successful, proceed with password recovery
              alert('Email sent to recover password!!!');
          } else {
              // CAPTCHA verification failed, display error message
              alert('CAPTCHA verification failed. Please try again.');
              // Regenerate a new CAPTCHA challenge
              initCaptcha();
              // Clear the user-entered CAPTCHA value
              document.getElementById('captcha-input').value = '';
          }
      }
  
      // Function to generate a random CAPTCHA challenge
      function generateCaptcha() {
          const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
          let captcha = '';
          for (let i = 0; i < 6; i++) {
              captcha += characters.charAt(Math.floor(Math.random() * characters.length));
          }
          return captcha;
      }
  
      // Function to initialize the CAPTCHA challenge
      function initCaptcha() {
          const captchaText = generateCaptcha();
          document.getElementById('captcha-text').textContent = captchaText;
          sessionStorage.setItem('captcha', captchaText); // Store the CAPTCHA challenge in session storage
      }
  
      // Initialize the CAPTCHA challenge when the page loads
      window.onload = initCaptcha;
  </script>
  
      <script>
        // Function to generate a random CAPTCHA challenge
        function generateCaptcha() {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return captcha;
        }

        // Function to initialize the CAPTCHA challenge
        function initCaptcha() {
            const captchaText = generateCaptcha();
            document.getElementById('captcha-text').textContent = captchaText;
            sessionStorage.setItem('captcha', captchaText); // Store the CAPTCHA challenge in session storage
        }

        // Initialize the CAPTCHA challenge when the page loads
        window.onload = initCaptcha;

        // Event listener for form submission
        document.getElementById('recovery-form').addEventListener('submit', function(event) {
            // Prevent the form from submitting
            event.preventDefault();
            
            // Get the user-entered CAPTCHA value
            const captchaInput = document.getElementById('captcha-input').value;
            
            // Get the correct CAPTCHA challenge from session storage
            const captcha = sessionStorage.getItem('captcha');
            
            // Verify the user-entered CAPTCHA value
            if (captchaInput === captcha) {
                // CAPTCHA verification successful, proceed with password recovery
                alert('CAPTCHA verification successful. Proceed with password recovery.');
                // You can submit the form or trigger password recovery logic here
            } else {
                // CAPTCHA verification failed, display error message
                alert('CAPTCHA verification failed. Please try again.');
                // Regenerate a new CAPTCHA challenge
                initCaptcha();
                // Clear the user-entered CAPTCHA value
                document.getElementById('captcha-input').value = '';
            }
        });
    </script>     
    <script src="assets/js/domer.js" type="text/javascript"></script>     
    <script src="assets/js/central.js" type="text/javascript"></script>     
  </body>   
</html>
